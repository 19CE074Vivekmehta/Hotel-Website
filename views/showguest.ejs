<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>

<body>
                
    <%let newArray = [];%>
    <%let uniqueObject = {};%>
    <%for (let i in roomList) {%>
    <%objrno = roomList[i]['room_no'];%>
    <%uniqueObject[objrno] = roomList[i];%>
    <%}%>
    <%for (i in uniqueObject) {%>
    <%newArray.push(uniqueObject[i]);%>
    <%}%>
    
    <%console.log("Room information page");%>
    <!-- <%console.log(newArray);%> -->
    <%newArray.forEach(room =>{%>
        <%if(room.name == fetch_name){ %>
          
    <section id="section2"
        style="padding: 5% 15%; text-align: center; background-color: black; color: rgb(255, 255, 255); height: 800px;">
        <h2 style="padding: 3%; ;">ROOM RESERVATIONS</h2>
        <%let status ;%>
        <%var btnstate; %>
        <h3>Status :  </h3>
        <%if((room.checkin < new Date() && room.checkout < new Date())){%>
          <%room.status="Available"%>
          <%=room.status%> 
          <br>
          <button onclick="<% btnstate='Book a room' %>"><a href="/rooms"><%=btnstate%></a></button>
        <%}else if(room.checkin <= new Date() && room.checkout >= new Date()){%> 
            <%room.status="Occupied"%>
            <%=room.status%> 
            <!-- <%btnstate="Checkout";%> -->
            <br>
            
          
            <!-- <button onchange="<%change_text()%>" value="<%=btnstate%>"><%=btnstate%></button> -->
            <!-- <%function change_text(){%>
                <% btnstate= "changed it";%>
                <% console.log(btnstate);%>
                <%}%> -->
                          
           
        <%}else if((room.checkin > new Date() && room.checkout > new Date())){%>
            <%room.status="Reserved"%>
            <%=room.status%>  
            <br> 
          <!-- <button onclick="<% if(room.status=='Reserved') {btnstate='Checkin';} %>"><%=btnstate%></button> -->
        <%} %>
    
            
          
        <table class="table table-dark">
            <thead>
               <tr>
                    <th scope="col">RoomNo.</th>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Check-In Date</th>
                    <th scope="col">Check-Out Date</th>
                    <th scope="col">Adults </th>
                    <th scope="col">Children</th>
                </tr>
            </thead>
            <tbody>
                        <%if((room.checkin < new Date() && room.checkout < new Date())){%>
                            <p><b>
                                Note : This room is available now !<br />
                                Past user's Details below
                            </b></p>
                            
                        <%}%>
                    <tr>
                            <td>
                                <%=room.room_no%>
                            </td>
                            <td>
                                <%=room.name%>
                            </td>
                            <td>
                                <%=room.email%>
                            </td>
                            <td>
                                <%=room.checkin%>
                            </td>
                            <td>
                                <%=room.checkout%>
                            </td>
                            <td>
                                <%=room.adultperson%>
                            </td>
                            <td>
                                <%=room.children%>
                            </td>
                    </tr>
                  
                    <%}%>
                        <%})%>

            </tbody>
        </table>
    </section>

</body>

</html>
<!-- 
//     function checkout(){
//               status = "Available";
//               room.checkin=new Date(); 
//               room.checkout=new Date();
//               console.log("i know right dude!"); 
//           }
//   function displayingMessageOnButtonClick() {
//       console.log("Please dude!");
//   } -->
