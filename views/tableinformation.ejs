<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
</head>

<body>
                
    <%let newArray = [];%>
    <%let uniqueObject = {};%>
    <%for (let i in dineList) {%>
    <%objrno = dineList[i]['tableno'];%>
    <%uniqueObject[objrno] = dineList[i];%>
    <%}%>
    <%for (i in uniqueObject) {%>
    <%newArray.push(uniqueObject[i]);%>
    <%}%>
    
    <%console.log("Table information page");%>
    <!-- <%console.log(newArray);%> -->
    <%newArray.forEach(dine =>{%>
        <%if(dine.tableno == fetch_id){ %>
          
    <section id="section2"
        style="padding: 5% 15%; text-align: center; background-color: black; color: rgb(255, 255, 255); height: 800px;">
        <h2 style="padding: 3%; ;">TABLE RESERVATIONS</h2>
        <%let status ;%>
        <%var btnstate; %>
        <h3>Status :  </h3>
        <%if(dine.datereserve.getDate() < new Date().getDate() && dine.datereserve.getHours() <= new Date().getHours()){%>
          <%status="Available"%>
          <%=status%> 
          <br>
          <button onclick="<% btnstate='Book a Table' %>"><a href="/dine_reservation"><%=btnstate%></a></button>
        <%}else if(dine.datereserve.getDate()  == new Date().getDate() || dine.datereserve.getHours() > new Date().getHours()){%> 
            <%status="Occupied"%>
            <%=status%> 
            <!-- <%btnstate="Checkout";%> -->
            <br>
            
          
            <!-- <button onchange="<%change_text()%>" value="<%=btnstate%>"><%=btnstate%></button> -->
            <!-- <%function change_text(){%>
                <% btnstate= "changed it";%>
                <% console.log(btnstate);%>
                <%}%> -->
                          
           
        <%}else if(dine.datereserve > new Date()){%>
            <%status="Reserved"%>
            <%=status%>  
            <br> 
        <%} %>
    
            
          
        <table class="table table-dark">
            <thead>
               <tr>
                <th scope="col">Table number</th>
                <th scope="col">First</th>
                <th scope="col">Last</th>
                <th scope="col">Contact No.</th>
                <th scope="col">No of Person</th>
                <th scope="col">Date</th>
                <th scope="col">Time</th>
                </tr>
            </thead>
            <tbody>
                        <%if(dine.datereserve.getDate() < new Date().getDate() && dine.datereserve.getHours() <= new Date().getHours()){%>
                            <p><b>
                                Note : This table is available now !<br />
                                Past user's Details below
                            </b></p>
                            
                        <%}%>
                    <tr>
                            <td>
                                <%=dine.tableno%>
                            </td>
                            <td>
                                <%=dine.f_name%>
                            </td>
                            <td>
                                <%=dine.l_name%>
                            </td>
                            <td>
                                <%=dine.contact%>
                            </td>
                            <td>
                                <%=dine.noperson%>
                            </td>
                            <td>
                                <%=dine.datereserve%>
                            </td>
                            <td>
                                <%=dine.timereserve%>
                            </td>
                    </tr>
                  
                    <%}%>
                        <%})%>

            </tbody>
        </table>
    </section>

</body>

</html>
<!-- 
//     function checkout(){
//               status = "Available";
//               room.checkin=new Date(); 
//               room.checkout=new Date();
//               console.log("i know right dude!"); 
//           }
//   function displayingMessageOnButtonClick() {
//       console.log("Please dude!");
//   } -->
